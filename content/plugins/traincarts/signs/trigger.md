---
title: trigger を使って線路上のトロッコを検出する
description: TrainCarts の trigger の使い方を解説します。
noToc: true
---

**Trigger** は、その上を走る train を検出し、train の情報を変数に代入できる機能です。
カウントダウンタイマーの機能もあり、駅などで次の列車の到着想定時間や行き先を案内できます。

変数の内容は [SignLink](https://www.spigotmc.org/resources/signlink.39593/) という別のプラグインを使って別の看板に表示させます。

## 看板の書き方
TrainCarts の看板の書き方についてのルールは[このページ](/plugins/traincarts/signs)を参照してください。

|#|記述|
|:---:|:------|
|2行目|`trigger`|
|3行目|トリガの名前 (ユニーク)|
|4行目|カウントダウンの時間 `mm:ss`|

### トリガの名前
三行目で定義される値です。トリガの名前は自分で決めます。このときの名前はユニークである (他の重複しない) 必要があります。また文字数制限の関係からこの名前はできるだけ短い方が良いと思います。

### カウントダウン
四行目で定義される値です。トリガの上を train が通過するとスタートするカウントダウンタイマの時間を `mm:ss` の形式で指定します。
例えば 1 分 30 秒なら `1:30` です。
train の所要時間を事前に調べて入力することで、train 到着までの想定待ち時間を看板で案内できます。

この欄を省略すると、TrainCarts が自動的に時間を決定します。時間は train 通過後、最初に停車するまでの時間になります。

## trigger で検知したトロッコの情報を別の看板で表示する
三行目で書いたトリガの名前が `trigger1` としたとき、以下の書式を看板に書くとトロッコの情報が看板に表示されます。

| 書式 | 表示内容 |
|:----:|:---------|
|`%trigger1%` | 四行目で定義したカウントダウンタイマーの内容 |
|`%trigger1T%` | (上記と同じ) |
|`%trigger1D%` | train の目的地 (destination) |
|`%trigger1N%` | train の名前 |
|`%trigger1V%` | train の速度 |

表示例
{{<tweet 944191138466074625>}}

## 外部ソース
- <https://wiki.traincarts.net/p/TrainCarts/Signs/Trigger>

{% include related/TrainCarts.md %}
